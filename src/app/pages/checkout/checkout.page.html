<h2>Finalizar Compra</h2>

<form class="row g-3 mt-1" [formGroup]="form" (ngSubmit)="submit()">
  <div class="col-12">
    <label class="form-label">Nome Completo</label>
    <input class="form-control" formControlName="fullName" placeholder="Ex.: Maria Souza">
    @if (f.fullName.touched && f.fullName.invalid) {
      <div class="text-danger small mt-1">
        @if (f.fullName.errors?.['required']) { Nome é obrigatório. }
        @if (f.fullName.errors?.['minlength']) { Mínimo de 3 caracteres. }
      </div>
    }
  </div>

  <div class="col-md-6">
    <label class="form-label">E-mail</label>
    <input class="form-control" formControlName="email" placeholder="exemplo@email.com">
    @if (f.email.touched && f.email.invalid) {
      <div class="text-danger small mt-1">
        @if (f.email.errors?.['required']) { E-mail é obrigatório. }
        @if (f.email.errors?.['email']) { Formato de e-mail inválido. }
      </div>
    }
  </div>

  <div class="col-md-6">
    <label class="form-label">Endereço</label>
    <input class="form-control" formControlName="address" placeholder="Rua, número, bairro...">
    @if (f.address.touched && f.address.invalid) {
      <div class="text-danger small mt-1">
        @if (f.address.errors?.['required']) { Endereço é obrigatório. }
        @if (f.address.errors?.['minlength']) { Descreva melhor o endereço. }
      </div>
    }
  </div>

  <div class="col-12 d-flex justify-content-between align-items-center">
    <div class="text-muted">
      Itens no carrinho: {{ (cart.count$ | async) ?? 0 }}
    </div>
    <button class="btn btn-success" type="submit" [disabled]="form.invalid">
      Finalizar Compra
    </button>
  </div>
</form>
